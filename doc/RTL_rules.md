# Правила проведения и оценки RTL-трека

## Содержание

- [Правила проведения](#правила-проведения)
- [Правила проверки результатов](#правила-проверки-результатов)
- [Методы измерения критериев](#методы-измерения-критериев)
  - [Измерение Perf](#измерение-perf)
  - [Измерение Area](#измерение-area)
- [Правила выполнения задания](#правила-выполнения-задания)

## Правила проведения

- Выполнение задания начинается `18-го апреля` после завершения организационной части.
- Решение команды должно быть загружено в репозиторий не позднее `14:00 20-го апреля`. 
- Для проверки на достоверность результатов будет принят последний на `14:00` коммит, лежащий в ветке `master`. 
- В течение `трех часов` жюри проверяет работы команд, после чего на награждении объявляются результаты соревнования.

## Правила проверки результатов

> В проверке результата используются только HDL-файлы, расположенные в **директории rtl**. Все файлы дизайнов, расположенные в других директориях, в проверке учитываться не будут. **Пожалуйста, следите, где сохраняете файлы.**  

> Для проверки достоверности результатов проводится **симуляция нетлиста** после синтеза в `Genus`. В том случае, если он не проходит тест, **результаты не будут засчитаны**.

> Время синтез итогового дизайна в `Genus` не должно превышать 2 часов. В том случае, если оно превышено, **результаты не будут засчитаны**.

Решение команды проверяется по **двум** критериям. Каждый из критериев команды могут измерить самостоятельно в процессе решения задачи.  

- **Производительность = Fmax / время завершения теста в тактах (`Perf`)** (больше — лучше)
- **Количество занимаемых ресурсов (`Area`)** (меньше — лучше)

**Каждый критерий оценивается отдельно**, и, в соответствии с занятым местом, каждая команда получает балл за критерий.  

Команда, занявшая по определенному критерию первое место, получает **максимальный балл, равный количеству команд**. Все остальные команды получают балл относительно того, насколько хуже их результат относительно первого места. Если результат хуже в три раза, то команда получает треть баллов от максимума. При совпадении результатов у двух и более команд они получают одинаковый балл.  

В таблице ниже **для примера** приведен список из 4 команд. Для каждого критерия указано измеренное значение, в скобках баллы, полученные командой, за критерий.

| Команда   | Perf    | Area     | Итоговый балл | Место в общем зачёте |
| ------    | ------  | ------   | ------        | ------               |
| Команда А | 75  (3) | 1800 (2) | 3.4           | 2                    | 
| Команда B | 100 (4) | 1200 (3) | 4.6           | 1                    | 
| Команда С | 50  (2) | 3600 (1) | 2.2           | 3                    | 
| Команда D | 25  (1) | 900  (4) | 1.8           | 4                    | 

**Итоговый балл для команды рассчитывается по формуле**, учитывающей баллы, набранные по каждому критерию. Формула отражает приоритет критериев с точки зрения выполнения задания и дает итоговый результат. Для **примера** итоговые баллы приведены в таблице.  

**Формула расчёта итогового балла:**  
$Итоговый$ $балл = (1.0 * Perf) + (0.2 * Area) $

**Пример** расчёта для команды А из таблицы выше:  
$Итоговый$ $балл = (1.0 * 3) + (0.2 * 2) = 3.4 $

Распределение команд в общем зачете происходит в соответствии с итоговым баллом. Команда, получившая максимальный итоговый балл, занимает первое место.

## Методы измерения критериев

Каждый из критериев, как было сказано выше, команда может получить самостоятельно в процессе выполнения задания.

- `Производительность Perf` измеряется как максимальная частота (в Гц), поделенная на время завершения референсного теста в тактах. Для измерения тактовой частоты смотри [инструкцию по анализу STA](./genus/genus_sta.adoc) и [запуску верификации](./Questa_How_To.md).
- `Количество занимаемых ресурсов (Area)` измеряется **при выполнении стадии синтеза в САПР Genus**. Смотри [инструкцию по запуску скриптов](./genus/genus.adoc).

Для оценки результатов можно запустить скрипт командой: `make metrics`

Вывод будет примерно такой:

<img src="img/metrics.jpg" alt="metrics" width="450">

### Измерение Perf

`Производительность Perf` измеряется как максимальная частота (в Гц), поделенная на время завершения референсного теста в тактах. Для измерения тактовой частоты смотри [инструкцию по анализу STA](./genus/genus_sta.adoc) и [запуску верификации](./Questa_How_To.md).

Максимальная частота считается как **1 / (Период тактовой частоты - WNS из репорта синтеза)**

**Важно**. Для изменения частоты, для которой будет проходить синтез, **поменяйте  частоту при синтезе**. Т.к. обявленная частота влияет на результаты синтеза по максимальной частоте и площади. **Слишком сильное увеличение частоты в констрейнах приведет к большому времени синтеза.**


### Измерение Area

Итоговая метрика по площади считается как **площадь дизайна**, взятая из репорта по синтезу в Genus. 



## Правила выполнения задания

При решении задачи:
- **Нельзя** изменять скрипты синтеза.
- **Нельзя** менять порты `top-level` модуля.
